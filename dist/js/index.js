require(["myLibrary"],function(e){function t(t,o,i){this.cookieName=t,this.cookieValue=e.cookieUtil.get(t),this.notice=o,this.close=i}function o(){var o=e.dom.getId("h-notice"),i=e.dom.getId("no-remind"),a=new t("wangyi_notice_show",o,i);a.cookieValue?e.dom.hide(a.notice):e.dom.show(a.notice),e.eventUnit.addHandler(a.close,"click",function(t){var o=e.eventUnit.getEvent(t);e.eventUnit.preventDafault(o),a.hideNotice(1e4)})}function i(t,o){this.cookieName=t,this.cookieValue=e.cookieUtil.get(t),this.parentBox=o}function a(t,o,i,a){this.cookieName=t,this.cookieValue=e.cookieUtil.get(t),this.loginFrame=i,this.back=a;for(var n in o)this[n]=o[n]}function n(){var t=e.dom.getId("message"),o=new i("followSuc",t),n=e.dom.getId("login-frame"),s=e.dom.getId("fixed-back"),r=new a("loginSuc",{user:e.dom.getId("user"),userRemind:e.dom.getId("remind-user"),pwd:e.dom.getId("pwd"),pwdRemind:e.dom.getId("remind-pwd")},n,s);r.cookieValue&&o.cookieValue?o.creAlreadyFollowEle():o.creFollowEle(),e.eventUnit.addHandler(t,"click",function(t){var i=e.eventUnit.getEvent(t);e.eventUnit.preventDafault(i);var a=i.target.className;if("cancel"==a){var n=e.dom.getClass(document,"follow-now")[0];o.creCancelFollow(n)}"follow"==a&&(r.cookieValue=e.cookieUtil.get(r.cookieName),r.cookieValue?o.creFollow(i.target):r.showFrame())});var l=e.dom.getId("login-close");e.eventUnit.addHandler(l,"click",function(t){var o=e.eventUnit.getEvent(t);e.eventUnit.preventDafault(o),r.closeFrame()});var d=e.dom.getId("submit");e.eventUnit.addHandler(d,"click",function(t){var i=e.eventUnit.getEvent(t);e.eventUnit.preventDafault(i);var a=parseInt(r.verificate("get","http://study.163.com/webDev/login.htm"));if(a){var n=e.dom.getClass(document,"follow")[0];r.closeFrame(),e.dom.removeElement(n),e.cookieUtil.set(r.cookieName,!0),e.cookieUtil.set(o.cookieName,!0),o.creAlreadyFollowEle()}else{var s=e.dom.getClass(document,"login-error")[0];r.errorInfer(s)}})}function s(t,o,i){this.img=t,this.imgLength=this.img.length,this.navSpan=e.dom.childNodes(o),this.navSpanLength=this.navSpan.length,this.navSpanStyle=i}function r(){var t=e.dom.getClass(document,"banner"),o=e.dom.getId("arrow"),i=new s(t,o,"spanClick");i.defaultShow(1);var a=setInterval(i.timer.bind(i),5e3),n=e.dom.getClass(document,"m-banner");e.eventUnit.addHandler(n[0],"mouseenter",function(){clearInterval(a)}),e.eventUnit.addHandler(n[0],"mouseleave",function(){a=setInterval(i.timer.bind(i),5e3)});for(var r=0;r<i.navSpanLength;r++)~function(t){e.eventUnit.addHandler(i.navSpan[t],"click",function(o){e.eventUnit.getEvent(o);i.switchImg(t),i.switchNavSpan(this,t)})}(r)}function l(e,t,o){this.box=e,this.mes1=t,this.mes2=o}function d(){var t=e.dom.getId("list-box"),o=e.dom.getId("mes1"),i=e.dom.getId("mes2"),a=new l(t,o,i);e.ajax("get","http://study.163.com/webDev/hotcouresByCategory.htm",null,a.getMessage.bind(a)),a.intervalScoll(66,300,5e3,!0)}function m(t,o,i){this.tabParent=t,this.allTab=e.dom.childNodes(this.tabParent),this.listParent=o,this.pageList=i,this.defaultShowNum="",this.defaultShowPage="",this.showPage="",this.tabNum="",this.totalPage="",this.data=""}function c(){var t=e.dom.getId("tab-list"),o=e.dom.getId("subject-list"),i=e.dom.getId("pageList"),a=new m(t,o,i);a.defaultShow(20,1,1),console.log(a),a.getSubList("get","http://study.163.com/webDev/couresByCategory.htm",{pageNo:a.defaultShowPage,psize:a.defaultShowNum,type:10*a.tabNum},a.composeEle.bind(a)),e.eventUnit.addHandler(a.tabParent,"click",function(t){var o=e.eventUnit.getEvent(t);a.tabNum=e.dom.getAttr(o.target,"value"),a.getSubList("get","http://study.163.com/webDev/couresByCategory.htm",{pageNo:a.defaultShowPage,psize:a.defaultShowNum,type:10*a.tabNum},a.composeEle.bind(a)),a.switchSub(o.target,"tab-click")});var n=e.dom.getId("arrow-left"),s=e.dom.getId("arrow-right");e.eventUnit.addHandler(n,"click",function(e){a.showPage>1&&(a.showPage-=1,a.getSubList("get","http://study.163.com/webDev/couresByCategory.htm",{pageNo:a.showPage,psize:a.defaultShowNum,type:10*a.tabNum},a.composeEle.bind(a)))}),e.eventUnit.addHandler(s,"click",function(e){a.showPage<a.totalPage&&(a.showPage+=1,a.getSubList("get","http://study.163.com/webDev/couresByCategory.htm",{pageNo:a.showPage,psize:a.defaultShowNum,type:10*a.tabNum},a.composeEle.bind(a)))}),e.eventUnit.addHandler(a.pageList,"click",function(t){var o=e.eventUnit.getEvent(t);a.showPage=e.dom.getAttr(o.target,"value"),a.getSubList("get","http://study.163.com/webDev/couresByCategory.htm",{pageNo:a.showPage,psize:a.defaultShowNum,type:10*a.tabNum},a.composeEle.bind(a))})}function h(e,t,o){this.back=e,this.frame=t,this.vedio=o,this.status=1}function u(){var t=e.dom.getId("fixed-back"),o=e.dom.getId("vedio-frame"),i=e.dom.getId("myVideo"),a=new h(t,o,i),n=e.dom.getId("play-content");e.eventUnit.addHandler(n,"click",a.showVedio.bind(a));var s=e.dom.getId("vedio-close");e.eventUnit.addHandler(s,"click",a.closeVedio.bind(a)),e.eventUnit.addHandler(a.vedio,"click",function(e){a.status?a.vedio.play():a.vedio.pause()}),e.eventUnit.addHandler(a.vedio,"pause",function(e){a.status=1}),e.eventUnit.addHandler(a.vedio,"play",function(e){a.status=0})}t.prototype.hideNotice=function(t){e.cookieUtil.set(this.cookieName,!0,t),e.dom.hide(this.notice)},i.prototype.creFollowEle=function(){var t=e.dom.insertElement(this.parentBox,"p","first",{"class":"follow"});e.dom.insertText(t,"+关注")},i.prototype.creAlreadyFollowEle=function(){var t=e.dom.insertElement(this.parentBox,"p","first",{"class":"follow-now"}),o=(e.dom.insertElement(t,"i","last",{"class":"true-img"}),e.dom.insertText(t,"已关注 "),e.dom.insertElement(t,"span","last")),i=(e.dom.insertText(o,"|"),e.dom.insertText(t," "),e.dom.insertElement(t,"a","last",{"class":"cancel",href:"javascript:void(0)"}));e.dom.insertText(i,"取消")},i.prototype.creFollow=function(t){e.dom.removeElement(t),e.cookieUtil.set(this.cookieName,!0),this.creAlreadyFollowEle()},i.prototype.creCancelFollow=function(t){e.cookieUtil.unset(this.cookieName),e.dom.removeElement(t),this.creFollowEle()},a.prototype.showFrame=function(){e.formUtil.monitor(this.user,this.userRemind),e.formUtil.monitor(this.pwd,this.pwdRemind),e.formUtil.resetForm(this.user,this.userRemind),e.formUtil.resetForm(this.pwd,this.pwdRemind),e.dom.show(this.back),e.dom.show(this.loginFrame)},a.prototype.closeFrame=function(){e.dom.hide(this.back),e.dom.hide(this.loginFrame)},a.prototype.verificate=function(t,o){var i=e.md5(this.user.value),a=e.md5(this.pwd.value),n="";return e.ajax(t,o+"?userName="+i+"&password="+a,null,function(e){n=e},!0),n},a.prototype.errorInfer=function(t){t.style.display="block",e.dom.myAnimate(t,{"margin-top":-60,opacity:1},150,!0);setTimeout(function(){e.dom.myAnimate(t,{"margin-top":-20,opacity:0},150,!0,function(){t.style.display="none"})},1e3)},s.prototype.switchImg=function(t){this.img[t].style.zIndex=100,e.dom.myAnimate(this.img[t],{opacity:1},600);for(var o=e.dom.sameSibling(this.img,this.img[t]),i=0;i<o.length;i++)e.dom.myAnimate(o[i],{opacity:0},600),o[i].style.zIndex=50},s.prototype.switchNavSpan=function(t,o){e.dom.addClass(t,this.navSpanStyle);for(var i=e.dom.sameSibling(this.navSpan,this.navSpan[o]),a=0;a<i.length;a++)e.dom.removeClass(i[a],this.navSpanStyle)},s.prototype.defaultShow=function(t){console.log(this);var t=t-1;this.img[t].style.zIndex=100,this.img[t].style.opacity=1,this.navSpanStyle&&e.dom.addClass(this.navSpan[t],this.navSpanStyle)},s.prototype.timer=function(){for(var e=0;e<this.navSpanLength;e++){var t=this.navSpan[e].className;if(t==this.navSpanStyle){var o=e+1;o==this.navSpanLength&&(o=0);break}}this.switchImg(o),this.switchNavSpan(this.navSpan[o],o)},l.prototype.getMessage=function(e){var t=JSON.parse(e);this.mes1.innerHTML="",this.createEle(this.mes1,t),this.mes2.innerHTML=this.mes1.innerHTML},l.prototype.createEle=function(t,o){for(var i=o.length,a=0;i>a;a++){var n=e.dom.insertElement(t,"li","last"),s=e.dom.insertElement(n,"a","last",{"class":"rank-list",href:"javascript:void(0)",title:o[a].name,"data-id":o[a].id,"data-name":o[a].name,"data-provider":o[a].provider,"data-learnerCount":o[a].learnerCount,"data-price":o[a].price,"data-categoryName":o[a].categoryName,"data-description":o[a].description}),r=e.dom.insertElement(s,"div","last"),l=(e.dom.insertElement(r,"img","last",{src:o[a].middlePhotoUrl}),e.dom.insertElement(s,"h2","last")),d=(e.dom.insertText(l,o[a].name),e.dom.insertElement(s,"p","last"));e.dom.insertElement(d,"i","last",{"class":"icon-user"}),e.dom.insertText(d," "+o[a].learnerCount)}},l.prototype.intervalScoll=function(t,o,i,a){var n=this,s=null,r=null,l=o/t,d=function(){n.box.scrollTop++,n.box.scrollTop%t==0?(clearInterval(s),r=setTimeout(m,i)):n.box.scrollTop>=n.mes1.offsetHeight&&(n.box.scrollTop=0)},m=function(){s=setInterval(d,l)};r=setTimeout(m,i),a&&(e.eventUnit.addHandler(this.box,"mouseenter",function(){clearInterval(s),clearTimeout(r)}),e.eventUnit.addHandler(this.box,"mouseleave",function(){r=setTimeout(m,i)}))},m.prototype.defaultShow=function(t,o,i){this.defaultShowNum=t,this.defaultShowPage=o,this.showPage=o,this.tabNum=i;var a=this.tabNum-1;e.dom.addClass(this.allTab[a],"tab-click")},m.prototype.switchSub=function(t,o){this.showPage=this.defaultShowPage,e.dom.addClass(t,o);for(var i=e.dom.allSibling(t,this.tabParent),a=0;a<i.length;a++)e.dom.removeClass(i[a],o)},m.prototype.pageSwitch=function(t){var o=this.pageList,i=this;e.eventUnit.addHandler(o,t,function(t){var o=e.eventUnit.getEvent(t);i.showPage=e.dom.getAttr(o.target,"value"),i.getSubList("get","http://study.163.com/webDev/couresByCategory.htm",{pageNo:i.showPage,psize:i.defaultShowNum,type:10*i.tabNum},i.composeEle.bind(i))})},m.prototype.getSubList=function(t,o,i,a){o+="?";for(key in i)o+=key+"="+i[key]+"&";o=o.slice(0,-1),e.ajax(t,o,null,a)},m.prototype.composeEle=function(t){var t=JSON.parse(t),o=t.list,i=o.length;this.listParent.innerHTML="",this.totalPage=t.totalPage;var a=this.totalPage,n=t.pagination.pageIndex,s=8;switch(this.pageList.innerHTML="",!0){case 5>=n:for(var r=0;s>r;r++){var l=e.dom.insertElement(this.pageList,"li","last",{value:r+1});e.dom.insertText(l,r+1)}break;case n>a-4:for(var r=s;r>0;r--){var l=e.dom.insertElement(this.pageList,"li","last",{value:a-r+1});e.dom.insertText(l,a-r+1)}break;default:for(var d=n-4,r=0;s>r;r++){console.log(d);var l=e.dom.insertElement(this.pageList,"li","last",{value:d});e.dom.insertText(l,d++)}}for(var m=e.dom.getTagName(this.pageList,"li"),c=m.length,h=0;c>h;h++)if(e.dom.getAttr(m[h],"value")==n){e.dom.addClass(m[h],"select-li");break}for(var u=0;i>u;u++){0==o[u].price?o[u].price="免费":o[u].price="¥"+Number.prototype.toFixed.call(o[u].price,2);var p=u+1,g=e.dom.insertElement(this.listParent,"a","last",{"class":"subject",href:"javascript:void(0)",title:o[u].name,"data-id":o[u].id,"data-name":o[u].name,"data-provider":o[u].provider,"data-learnerCount":o[u].learnerCount,"data-price":o[u].price,"data-categoryName":o[u].categoryName,"data-description":o[u].description});p%4===0&&(g.style.marginRight="0");var v=(e.dom.insertElement(g,"img","last",{src:o[u].middlePhotoUrl}),e.dom.insertElement(g,"p","last",{title:o[u].name,"class":"title"})),f=(e.dom.insertText(v,o[u].name),e.dom.insertElement(g,"p","last",{"class":"album"})),w=(e.dom.insertText(f,o[u].provider),e.dom.insertElement(g,"p","last",{"class":"num"})),y=(e.dom.insertElement(w,"i","last",{"class":"icon-user"}),e.dom.insertText(w," "+o[u].learnerCount),e.dom.insertElement(g,"p","last",{"class":"price"}));e.dom.insertText(y,o[u].price)}},h.prototype.showVedio=function(){console.log(this),this.vedio.load(),e.dom.show(this.back),e.dom.show(this.frame)},h.prototype.closeVedio=function(){return this.vedio.pause(),e.dom.hide(this.back),e.dom.hide(this.frame),!1},~function(){o(),n(),r(),d(),c(),u()}()});
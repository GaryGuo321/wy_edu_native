function TopNotice(e,t,o){this.cookieName=e,this.cookieValue=cookieUtil.get(e),this.notice=t,this.close=o}function topNoticeSet(){var e=dom.getId("h-notice"),t=dom.getId("no-remind"),o=new TopNotice("wangyi_notice_show",e,t);o.cookieValue?dom.hide(o.notice):dom.show(o.notice),eventUnit.addHandler(o.close,"click",function(e){var t=eventUnit.getEvent(e);eventUnit.preventDafault(t),o.hideNotice(1e4)})}function Follow(e,t){this.cookieName=e,this.cookieValue=cookieUtil.get(e),this.parentBox=t}function Login(e,t,o,a){this.cookieName=e,this.cookieValue=cookieUtil.get(e),this.loginFrame=o,this.back=a;for(var i in t)this[i]=t[i]}function loginFollow(){var e=dom.getId("message"),t=new Follow("followSuc",e),o=dom.getId("login-frame"),a=dom.getId("fixed-back"),i=new Login("loginSuc",{user:dom.getId("user"),userRemind:dom.getId("remind-user"),pwd:dom.getId("pwd"),pwdRemind:dom.getId("remind-pwd")},o,a);i.cookieValue&&t.cookieValue?t.creAlreadyFollowEle():t.creFollowEle(),eventUnit.addHandler(e,"click",function(e){var o=eventUnit.getEvent(e);eventUnit.preventDafault(o);var a=o.target.className;if("cancel"==a){var n=dom.getClass(document,"follow-now")[0];t.creCancelFollow(n)}"follow"==a&&(i.cookieValue=cookieUtil.get(i.cookieName),i.cookieValue?t.creFollow(o.target):i.showFrame())});var n=dom.getId("login-close");eventUnit.addHandler(n,"click",function(e){var t=eventUnit.getEvent(e);eventUnit.preventDafault(t),i.closeFrame()});var s=dom.getId("submit");eventUnit.addHandler(s,"click",function(e){var o=document.forms["login-form"],a=eventUnit.getEvent(e);eventUnit.preventDafault(a),CORSRequest("http://study.163.com/webDev/login.htm",{userName:md5(o.userName.value),password:md5(o.password.value)},function(e){if(e=parseInt(e)){var o=dom.getClass(document,"follow")[0];i.closeFrame(),dom.removeElement(o),cookieUtil.set(i.cookieName,!0),cookieUtil.set(t.cookieName,!0),t.creAlreadyFollowEle()}else{var a=dom.getClass(document,"login-error")[0];i.errorInfer(a)}})})}function Banner(e,t,o){this.img=e,this.imgLength=this.img.length,this.navSpan=dom.childNodes(t),this.navSpanLength=this.navSpan.length,this.navSpanStyle=o}function bannerImg(){var e=dom.getClass(document,"banner"),t=dom.getId("arrow"),o=new Banner(e,t,"spanClick");o.defaultShow(1);var a=setInterval(o.timer.bind(o),5e3),i=dom.getClass(document,"m-banner");eventUnit.addHandler(i[0],"mouseenter",function(){clearInterval(a)}),eventUnit.addHandler(i[0],"mouseleave",function(){a=setInterval(o.timer.bind(o),5e3)});for(var n=0;n<o.navSpanLength;n++)~function(e){eventUnit.addHandler(o.navSpan[e],"click",function(t){eventUnit.getEvent(t);o.switchImg(e),o.switchNavSpan(this,e)})}(n)}function MessageScoll(e,t,o){this.box=e,this.mes1=t,this.mes2=o}function hotCouresScroll(){var e=dom.getId("list-box"),t=dom.getId("mes1"),o=dom.getId("mes2"),a=new MessageScoll(e,t,o);CORSRequest("http://study.163.com/webDev/hotcouresByCategory.htm",null,a.getMessage.bind(a)),a.intervalScoll(66,300,5e3,!0)}function SubList(e,t,o){this.tabParent=e,this.allTab=dom.childNodes(this.tabParent),this.listParent=t,this.pageList=o,this.defaultShowNum="",this.defaultShowPage="",this.showPage="",this.tabNum="",this.totalPage="",this.data=""}function subjectList(){var e=dom.getId("tab-list"),t=dom.getId("subject-list"),o=dom.getId("pageList"),a=new SubList(e,t,o);a.defaultShow(20,1,1),console.log(a),CORSRequest("http://study.163.com/webDev/couresByCategory.htm",{pageNo:a.defaultShowPage,psize:a.defaultShowNum,type:10*a.tabNum},a.composeEle.bind(a)),eventUnit.addHandler(a.tabParent,"click",function(e){var t=eventUnit.getEvent(e);a.tabNum=dom.getAttr(t.target,"value"),CORSRequest("http://study.163.com/webDev/couresByCategory.htm",{pageNo:a.defaultShowPage,psize:a.defaultShowNum,type:10*a.tabNum},a.composeEle.bind(a)),a.switchSub(t.target,"tab-click")});var i=dom.getId("arrow-left"),n=dom.getId("arrow-right");eventUnit.addHandler(i,"click",function(e){a.showPage>1&&(a.showPage-=1,CORSRequest("http://study.163.com/webDev/couresByCategory.htm",{pageNo:a.showPage,psize:a.defaultShowNum,type:10*a.tabNum},a.composeEle.bind(a)))}),eventUnit.addHandler(n,"click",function(e){a.showPage<a.totalPage&&(a.showPage+=1,CORSRequest("http://study.163.com/webDev/couresByCategory.htm",{pageNo:a.showPage,psize:a.defaultShowNum,type:10*a.tabNum},a.composeEle.bind(a)))}),eventUnit.addHandler(a.pageList,"click",function(e){var t=eventUnit.getEvent(e);a.showPage=dom.getAttr(t.target,"value"),CORSRequest("http://study.163.com/webDev/couresByCategory.htm",{pageNo:a.showPage,psize:a.defaultShowNum,type:10*a.tabNum},a.composeEle.bind(a))})}function VedioPaly(e,t,o){this.back=e,this.frame=t,this.vedio=o,this.status=1}function vedioControl(){var e=dom.getId("fixed-back"),t=dom.getId("vedio-frame"),o=dom.getId("myVideo"),a=new VedioPaly(e,t,o),i=dom.getId("play-content");eventUnit.addHandler(i,"click",a.showVedio.bind(a));var n=dom.getId("vedio-close");eventUnit.addHandler(n,"click",a.closeVedio.bind(a)),eventUnit.addHandler(a.vedio,"click",function(e){a.status?a.vedio.play():a.vedio.pause()}),eventUnit.addHandler(a.vedio,"pause",function(e){a.status=1}),eventUnit.addHandler(a.vedio,"play",function(e){a.status=0})}TopNotice.prototype.hideNotice=function(e){cookieUtil.set(this.cookieName,!0,e),dom.hide(this.notice)},Follow.prototype.creFollowEle=function(){var e=dom.insertElement(this.parentBox,"p","first",{"class":"follow"});dom.insertText(e,"+关注")},Follow.prototype.creAlreadyFollowEle=function(){var e=dom.insertElement(this.parentBox,"p","first",{"class":"follow-now"}),t=(dom.insertElement(e,"i","last",{"class":"true-img"}),dom.insertText(e,"已关注 "),dom.insertElement(e,"span","last")),o=(dom.insertText(t,"|"),dom.insertText(e," "),dom.insertElement(e,"a","last",{"class":"cancel",href:"javascript:void(0)"}));dom.insertText(o,"取消")},Follow.prototype.creFollow=function(e){dom.removeElement(e),cookieUtil.set(this.cookieName,!0),this.creAlreadyFollowEle()},Follow.prototype.creCancelFollow=function(e){cookieUtil.unset(this.cookieName),dom.removeElement(e),this.creFollowEle()},Login.prototype.showFrame=function(){formUtil.monitor(this.user,this.userRemind),formUtil.monitor(this.pwd,this.pwdRemind),formUtil.resetForm(this.user,this.userRemind),formUtil.resetForm(this.pwd,this.pwdRemind),dom.show(this.back),dom.show(this.loginFrame)},Login.prototype.closeFrame=function(){dom.hide(this.back),dom.hide(this.loginFrame)},Login.prototype.errorInfer=function(e){e.style.display="block",dom.myAnimate(e,{"margin-top":-60,opacity:1},150,!0);setTimeout(function(){dom.myAnimate(e,{"margin-top":-20,opacity:0},150,!0,function(){e.style.display="none"})},1e3)},Banner.prototype.switchImg=function(e){this.img[e].style.zIndex=100,dom.myAnimate(this.img[e],{opacity:1},600);for(var t=dom.sameSibling(this.img,this.img[e]),o=0;o<t.length;o++)dom.myAnimate(t[o],{opacity:0},600),t[o].style.zIndex=50},Banner.prototype.switchNavSpan=function(e,t){dom.addClass(e,this.navSpanStyle);for(var o=dom.sameSibling(this.navSpan,this.navSpan[t]),a=0;a<o.length;a++)dom.removeClass(o[a],this.navSpanStyle)},Banner.prototype.defaultShow=function(e){console.log(this);var e=e-1;this.img[e].style.zIndex=100,this.img[e].style.opacity=1,this.navSpanStyle&&dom.addClass(this.navSpan[e],this.navSpanStyle)},Banner.prototype.timer=function(){for(var e=0;e<this.navSpanLength;e++){var t=this.navSpan[e].className;if(t==this.navSpanStyle){var o=e+1;o==this.navSpanLength&&(o=0);break}}this.switchImg(o),this.switchNavSpan(this.navSpan[o],o)},MessageScoll.prototype.getMessage=function(data){if(window.JSON)var addData=JSON.parse(data);else var addData=eval("("+data+")");this.mes1.innerHTML="",this.createEle(this.mes1,addData),this.mes2.innerHTML=this.mes1.innerHTML},MessageScoll.prototype.createEle=function(e,t){for(var o=t.length,a=0;o>a;a++){var i=dom.insertElement(e,"li","last"),n=dom.insertElement(i,"a","last",{"class":"rank-list",href:"javascript:void(0)",title:t[a].name,"data-id":t[a].id,"data-name":t[a].name,"data-provider":t[a].provider,"data-learnerCount":t[a].learnerCount,"data-price":t[a].price,"data-categoryName":t[a].categoryName,"data-description":t[a].description}),s=dom.insertElement(n,"div","last"),l=(dom.insertElement(s,"img","last",{src:t[a].middlePhotoUrl}),dom.insertElement(n,"h2","last")),d=(dom.insertText(l,t[a].name),dom.insertElement(n,"p","last"));dom.insertElement(d,"i","last",{"class":"icon-user"}),dom.insertText(d," "+t[a].learnerCount)}},MessageScoll.prototype.intervalScoll=function(e,t,o,a){var i=this,n=null,s=null,l=t/e,d=function(){i.box.scrollTop++,i.box.scrollTop%e==0?(clearInterval(n),s=setTimeout(r,o)):i.box.scrollTop>=i.mes1.offsetHeight&&(i.box.scrollTop=0)},r=function(){n=setInterval(d,l)};s=setTimeout(r,o),a&&(eventUnit.addHandler(this.box,"mouseenter",function(){clearInterval(n),clearTimeout(s)}),eventUnit.addHandler(this.box,"mouseleave",function(){s=setTimeout(r,o)}))},SubList.prototype.defaultShow=function(e,t,o){this.defaultShowNum=e,this.defaultShowPage=t,this.showPage=t,this.tabNum=o;var a=this.tabNum-1;dom.addClass(this.allTab[a],"tab-click")},SubList.prototype.switchSub=function(e,t){this.showPage=this.defaultShowPage,dom.addClass(e,t);for(var o=dom.allSibling(e,this.tabParent),a=0;a<o.length;a++)dom.removeClass(o[a],t)},SubList.prototype.composeEle=function(data){if(window.JSON)var data=JSON.parse(data);else var data=eval("("+data+")");var dataList=data.list,dataLength=dataList.length;this.listParent.innerHTML="",this.totalPage=data.totalPage;var totalPage=this.totalPage,nowPage=data.pagination.pageIndex,pageListNum=8;switch(this.pageList.innerHTML="",!0){case 5>=nowPage:for(var s=0;pageListNum>s;s++)var li=dom.insertElement(this.pageList,"li","last",{value:s+1}),liText=dom.insertText(li,s+1);break;case nowPage>totalPage-4:for(var s=pageListNum;s>0;s--)var li=dom.insertElement(this.pageList,"li","last",{value:totalPage-s+1}),liText=dom.insertText(li,totalPage-s+1);break;default:for(var middlePage=nowPage-4,s=0;pageListNum>s;s++){console.log(middlePage);var li=dom.insertElement(this.pageList,"li","last",{value:middlePage}),liText=dom.insertText(li,middlePage++)}}for(var allLi=dom.getTagName(this.pageList,"li"),allLiLength=allLi.length,t=0;allLiLength>t;t++)if(dom.getAttr(allLi[t],"value")==nowPage){dom.addClass(allLi[t],"select-li");break}for(var i=0;dataLength>i;i++){0==dataList[i].price?dataList[i].price="免费":dataList[i].price="¥"+Number.prototype.toFixed.call(dataList[i].price,2);var num=i+1,box=dom.insertElement(this.listParent,"a","last",{"class":"subject",href:"javascript:void(0)",title:dataList[i].name,"data-id":dataList[i].id,"data-name":dataList[i].name,"data-provider":dataList[i].provider,"data-learnerCount":dataList[i].learnerCount,"data-price":dataList[i].price,"data-categoryName":dataList[i].categoryName,"data-description":dataList[i].description});num%4===0&&(box.style.marginRight="0");var img=dom.insertElement(box,"img","last",{src:dataList[i].middlePhotoUrl}),title=dom.insertElement(box,"p","last",{title:dataList[i].name,"class":"title"}),titleText=dom.insertText(title,dataList[i].name),album=dom.insertElement(box,"p","last",{"class":"album"}),albumText=dom.insertText(album,dataList[i].provider),learner=dom.insertElement(box,"p","last",{"class":"num"}),iEle=dom.insertElement(learner,"i","last",{"class":"icon-user"}),learnerNum=dom.insertText(learner," "+dataList[i].learnerCount),price=dom.insertElement(box,"p","last",{"class":"price"}),priceNum=dom.insertText(price,dataList[i].price)}},VedioPaly.prototype.showVedio=function(){console.log(this),this.vedio.load(),dom.show(this.back),dom.show(this.frame)},VedioPaly.prototype.closeVedio=function(){return this.vedio.pause(),dom.hide(this.back),dom.hide(this.frame),!1},window.onload=function(){topNoticeSet(),loginFollow(),bannerImg(),hotCouresScroll(),subjectList(),vedioControl()};